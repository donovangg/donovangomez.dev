---
import { getCollection } from "astro:content";
import ProjectCard from "../../components/ProjectCard.astro";
import Layout from "../../layouts/Layout.astro";

const allProjects = await getCollection("projects");

const sortedProjects = allProjects.sort((a, b) => Number(b.data.datePublished) - Number(a.data.datePublished))

---

<Layout>
  <main class="bg-zinc-900 w-full mx-auto min-h-screen relative py-14 z-10">
    <h1
      class="text-center text-6xl py-24 bg-gradient-to-r from-rose-400 via-fuchsia-500 to-indigo-500 bg-clip-text text-transparent font-black"
    >
      Projects
    </h1>
    <div class="min-h-screen w-5/6 mx-auto">
      <div class="flex flex-wrap justify-center gap-4">
        {
          sortedProjects.map((project) => (
            <ProjectCard
              title={project.data.title}
              link={project.data.link}
              stack={project.data.stack}
              github={project.data.github}
              imgSrc={project.data.imgSrc}
              description={project.data.description}
              url={`/projects/${project.slug}`}
            />
          ))
        }
      </div>
    </div>
  </main>
</Layout>
